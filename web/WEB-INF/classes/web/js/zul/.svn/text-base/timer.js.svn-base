zkTimer={};zkTimer._intvs=[];zk.Timer=zClass.create();zk.Timer.prototype={initialize:function(A){this.id=A.id;zkau.setMeta(A,this);this.init()},init:function(){var C=$e(this.id);if(!C){return }this.cleanup();var A=getZKAttr(C,"repeats")=="true";var B=getZKAttr(C,"delay");var D="zkTimer._fire('"+this.id+"')";if(A){zkTimer._intvs.push(this.interval=setInterval(D,B))}else{this.timeout=setTimeout(D,B)}},cleanup:function(){if(this.timeout){clearTimeout(this.timeout);this.timeout=null}if(this.interval){clearInterval(this.interval);zkTimer._intvs.remove(this.interval);this.interval=null}}};zkTimer.init=function(A){if(getZKAttr(A,"running")!="false"){var B=zkau.getMeta(A);if(B){B.init()}else{new zk.Timer(A)}}};zkTimer.setAttr=function(B,A,D){if(A=="z.running"){zkau.setAttr(B,A,D);if(D=="true"){zkTimer.init(B)}else{var C=zkau.getMeta(B);if(C){C.cleanup()}}return true}return false};zkTimer.stopAll=function(){for(var A=zkTimer._intvs;A.length;){clearInterval(A.shift())}};zkTimer._fire=function(A){zkau.send({uuid:A,cmd:"onTimer",ignorable:true},0)};zk.override(zkau,"pushXmlResp",zkTimer,function(A,B){if(B.getResponseHeader("ZK-Error")=="410"){zkTimer.stopAll()}return zkTimer.pushXmlResp(A,B)});