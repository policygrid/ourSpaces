zk.load("zul.zul");if(!window.Selectable_effect){window.Selectable_effect=function(C,A){if(A){var B=getZKAttr(C,"zcls");zk.rmClass(C,B+"-over-seld");zk.rmClass(C,B+"-over")}else{var B=getZKAttr(C,"zcls");zk.addClass(C,zk.hasClass(C,B+"-seld")?B+"-over-seld":B+"-over")}}}var _zkselx={};zk.override(zkau.cmd1,"addAft",_zkselx,function(B,C,A){if(!C||!_zkselx._addChd(B,C,A)){_zkselx.addAft(B,C,A)}});zk.override(zkau.cmd1,"addBfr",_zkselx,function(B,C,A){if(!C||!_zkselx._addChd(B,C,A)){_zkselx.addBfr(B,C,A)}});_zkselx._addChd=function(A,F,D){var C=D.trim(),K=C.indexOf("Lit"),L=C.indexOf("<tr")==0&&K>-1&&K<C.indexOf(">"),E=$type(F);if(L&&(!E||E.indexOf("Lit")<0)){var G=$parentByTag(F.parentNode,"DIV"),J=$e($uuid(G)+"!cave");if(!J){return false}var H=J.tBodies[J.tBodies.length-1];if(H.rows.length){var B=H.rows[0],I=B.previousSibling;zk.insertHTMLBefore(B,D);zkau._initSibs(B,I,false)}else{zk.insertHTMLBeforeEnd(H,D);zkau._initChildren(H)}return true}return false};zk.Selectable=zClass.create();zk.Selectable.prototype={initialize:function(A){this.id=A.id;zkau.setMeta(A,this);this.qcells=[];this.init()},init:function(){this.element=$e(this.id);if(!this.element){return }if(getZKAttr(this.element,"vflex")=="true"){if(zk.ie){this.element.style.overflow="hidden"}var B=this.element.style.height;if(!B||B=="auto"){this.element.style.height="99%"}}this.body=$e(this.id+"!body");this.paging=getZKAttr(this.element,"pg")!=null;if(this.body){this.body.style.overflow="";this.bodytbl=zk.firstChild(this.body,"TABLE",true);this.head=$e(this.id+"!head");this.foot=$e(this.id+"!foot");if(this.foot){this.foottbl=zk.firstChild(this.foot,"TABLE",true)}if(this.head){this.headtbl=zk.firstChild(this.head,"TABLE",true);this.headrows=this.headtbl.tBodies[this.headtbl.tBodies.length-1].rows;this.hdfaker=this.headtbl.tBodies[0].rows[0];this.bdfaker=this.bodytbl.tBodies[0].rows[0];if(this.foot){this.ftfaker=this.foottbl.tBodies[0].rows[0]}}if(this.bodytbl){var G=this.bodytbl.tBodies;if(!G||!G.length||(this.head&&G.length<2)){this.bodytbl.appendChild(document.createElement("TBODY"))}this.bodyrows=G[this.head?1:0].rows}}if(!this.bodyrows){zk.error(mesg.INVALID_STRUCTURE+this.id);return }var F=$e(this.id,"a");zk.listen(F,"keydown",this.onKeydown);zk.listen(F,"blur",this.onBlur);var I=this;if(!this._inited){this._inited=true;if(zk.gecko){this.element.onkeydown=this.element.onkeyup=this.element.onkeypress=function(J){var K=Event.element(J);if(zkSel._shallIgnoreEvent(K)){return true}if(J){switch(Event.keyCode(J)){case 33:case 34:case 38:case 40:case 37:case 39:case 32:case 36:case 35:Event.stop(J);return false}}return true}}this.form=zk.formOf(this.element);if(this.form){this.fnSubmit=function(){I.onsubmit()};zk.listen(this.form,"submit",this.fnSubmit)}}if(this.headtbl&&this.headrows.length){var E=true;l_out:for(var D=this.headrows.length;D;){var H=this.headrows[--D];for(var C=H.cells.length;C;){var A=H.cells[--C].firstChild;for(A=A?A.firstChild:A;A;A=A.nextSibling){if(!A.id||!A.id.endsWith("!hint")){E=false;break l_out}}}}if(E){this.head.style.display="none"}else{this.head.style.display=""}}this.body.onscroll=function(){if(zk.opera){I._scrollTop=I.body.scrollTop}if(I.head){I.head.scrollLeft=I.body.scrollLeft}if(I.foot){I.foot.scrollLeft=I.body.scrollLeft}if(!I.paging){I._render(zk.gecko?200:60)}}},getCurrentTarget:function(){return this._focusItem},onBlur:function(A){var B=zkau.getMeta($uuid(Event.element(A)));if(B){zkSel.cmonblurTo(B._focusItem)}},onKeydown:function(A){var B=zkau.getMeta($uuid(Event.element(A)));if(B){B.dokeydown(A,B._focusItem)}},cleanup:function(){if(this.fnSubmit){zk.unlisten(this.form,"submit",this.fnSubmit)}this.element=this.body=this.head=this.bodytbl=this.headtbl;this.foot=this.foottbl=this.fnSubmit=this._focusItem=null},stripe:function(){var A=getZKAttr(this.element,"scOddRow");if(!A||!this.bodyrows){return }for(var B=0,D=true,E=this.bodyrows.length;B<E;++B){var C=this.bodyrows[B];if($visible(C)&&getZKAttr(C,"nostripe")!="true"){zk.addClass(C,A,!D);D=!D}}},dobodykeydown:function(A,B){if(zkSel._shallIgnoreEvent(B)){return true}switch(Event.keyCode(A)){case 33:case 34:case 38:case 40:case 37:case 39:case 32:case 36:case 35:if($tag(B)!="A"){this._refocus()}Event.stop(A);return false}return true},dokeydown:function(B,E){if(zkau.processing()||zkSel._shallIgnoreEvent(E)){return true}var F=$tag(E)=="TR"?E:zk.parentNode(E,"TR");if(!F){return true}F=$e(F);var A=B.shiftKey,D=B.ctrlKey;if(A&&!this._isMultiple()){A=false}var H=false,C,G;switch(Event.keyCode(B)){case 33:case 34:C=this.realsize();if(C==0){C=20}if(Event.keyCode(B)==33){C=-C}break;case 38:case 40:C=Event.keyCode(B)==40?1:-1;break;case 32:if(this._isMultiple()){this.toggleSelect(F,!this._isSelected(F))}else{this.select(F)}break;case 36:case 35:C=Event.keyCode(B)==35?1:-1;H=true;break;case 37:this._doLeft(F);break;case 39:this._doRight(F);break}if(C){if(A){this.toggleSelect(F,true)}for(;(F=C>0?F.nextSibling:F.previousSibling)!=null;){if($tag(F)=="TR"&&this._isValid(F)&&!getZKAttr(F,"disd")){if(A){this.toggleSelect(F,true)}if($visible(F)){if(!A){G=F}if(!H){if(C>0){--C}else{++C}if(C==0){break}}}}}}if(G){if(D){this.focus(G)}else{this.select(G)}this._syncFocus(G);zk.scrollIntoView(this.body,G)}switch(Event.keyCode(B)){case 33:case 34:case 38:case 40:case 37:case 39:case 32:case 36:case 35:Event.stop(B);return false}return true},_doLeft:function(A){},_doRight:function(A){},_isRowType:function(B){var A=$type(B);return A=="Lit"||A=="Litgp"||A=="Litgpft"},doclick:function(B,F){if(zkSel._shallIgnoreEvent(F)){return }var A=$tag(F);if((A!="TR"&&F.onclick)||A=="A"||getZKAttr(F,"lfclk")||getZKAttr(F,"dbclk")){return }var E=F.id&&F.id.endsWith("!cm");var G=zkSel.getNearestRow(F);if(!G||!this._isRowType(G)||getZKAttr(G,"rid")!=this.id){return }if(zk.dragging){return }if(E){if(this._isMultiple()){this.toggleSelect(G,F.checked)}else{this.select(G)}}else{if((zk.gecko||zk.safari)&&getZKAttr(G,"dbclk")){var C=$now(),D=G._last;G._last=C;if(D&&C-D<900){return }}this._syncFocus(G);if(this._isMultiple()){if(B&&B.shiftKey){this.selectUpto(G)}else{if(B&&B.ctrlKey){this.toggleSelect(G,!this._isSelected(G))}else{this.select(G)}}}else{this.select(G)}this._focusToAnc(G)}},_syncFocus:function(C){var A=$e(getZKAttr(C,"rid"),"a"),B=zk.revisedOffset(C);B=this._toStyleOffset(A,B[0]+this.body.scrollLeft,B[1]);A.style.top=B[1]+"px";A.style.left=B[0]+"px"},_toStyleOffset:function(C,B,E){var A=zk.revisedOffset(C),D=zk.getStyleOffset(C);return[B-A[0]+D[0],E-A[1]+D[1]]},size:function(){var A=getZKAttr(this.element,"size");return A?$int(A):0},realsize:function(A){if("number"==typeof A){this.element.setAttribute("zk_realsize",A)}else{var B=this.size();if(B){return B}B=this.element.getAttribute("zk_realsize");return B?$int(B):0}},_refocus:function(){for(var B=0,D=this.bodyrows.length;B<D;++B){var C=this.bodyrows[B];if(this._isFocus(C)){this._focusToAnc(C);return }}var A=$e(this.id,"a");if(A){zk.asyncFocus(A.id)}},setAttr:function(J,A){switch(J){case"z.innerWidth":if(this.headtbl){this.headtbl.style.width=A}if(this.bodytbl){this.bodytbl.style.width=A}if(this.foottbl){this.foottbl.style.width=A}return true;case"select":var G=$e(A);this._selectOne(G,false);zk.scrollIntoView(this.body,G);return true;case"selectAll":this._selectAll();return true;case"z.multiple":this._setMultiple("true"==A);return true;case"chgSel":var E={};for(var D=0;;){var C=A.indexOf(",",D);var I=(C>=0?A.substring(D,C):A.substring(D)).trim();if(I){E[I]=true}if(C<0){break}D=C+1}var H=this.bodyrows;for(var D=0,F=H.length;D<F;++D){this._changeSelect(H[D],E[H[D].id]==true)}return true;case"z.vflex":if(A=="true"){if(zk.ie){this.element.style.overflow="hidden"}var B=this.element.style.height;if(!B||B=="auto"){this.element.style.height="99%"}}else{if(zk.ie){this.element.style.overflow=""}}case"z.size":zkau.setAttr(this.element,J,A);this._recalcSize();return true;case"style.width":if(this.headtbl){this.headtbl.style.width=""}if(this.foottbl){this.foottbl.style.width=""}case"style":case"style.height":zkau.setAttr(this.element,J,A);this._recalcSize();return true;case"scrollTop":if(this.body){this.body.scrollTop=A;return true}break;case"scrollLeft":if(this.body){this.body.scrollLeft=A;return true}break;case"z.scOddRow":zkau.setAttr(this.element,J,A);this.stripe();return true;case"z.render":this._render(0);return true}return false},getItemUuid:function(A){return A.id},select:function(A){if(this._selectOne(A,true)){zkau.sendasap({uuid:this.id,cmd:"onSelect",data:[this.getItemUuid(A),this.getItemUuid(A)]})}},toggleSelect:function(D,B){this._changeSelect(D,B);this.focus(D);var A=this._getSelectedId();if(this._isMultiple()){if(D.id==A){this._fixSelelectedId()}}else{if(A){var C=$e(A);if(C){this._changeSelect(C,false)}}}this._sendSelect(D)},selectUpto:function(E){if(this._isSelected(E)){this.focus(E);return }var D=false,C=false;for(var A=0,F=this.bodyrows.length;A<F;++A){var B=this.bodyrows[A];if(getZKAttr(B,"disd")){continue}if(D){this._changeSelect(B,true);if(B==E){break}}else{if(C){this._changeSelect(B,true);if(this._isFocus(B)){break}}else{C=B==E;D=this._isFocus(B);if(C||D){this._changeSelect(B,true);if(C&&D){break}}}}}this.focus(E);this._fixSelelectedId();this._sendSelect(E)},focus:function(A){if(zkau.canFocus(A,true)){this._unsetFocusExcept(A);this._setFocus(A,true)}},_focusToAnc:function(C){if(C&&zkau.canFocus(C,true)){var B=typeof C=="string"?C:C.id;var A=$e(B+"!cm");if((A&&A.tabIndex!=-1)||(A=$e(getZKAttr(C,"rid"),"a"))){zk.asyncFocus(A.id);zkSel.cmonfocusTo(C)}}},_selectOne:function(E,B){E=$e(E);var A=this._getSelectedId();if(this._isMultiple()){if(E&&B){this._unsetFocusExcept(E)}var D=this._unsetSelectAllExcept(E);if(!D&&E&&A==E.id){if(B){this._setFocus(E,true)}return false}}else{if(A){if(E&&A==E.id){if(B){this._setFocus(E,true)}return false}var C=$e(A);if(C){this._changeSelect(C,false);if(E){if(B){this._setFocus(C,false)}}}}if(E&&B){this._unsetFocusExcept(E)}}if(E){this._changeSelect(E,true);if(B){this._setFocus(E,true)}this._setSelectedId(E.id)}else{this._setSelectedId(null)}return true},_changeSelect:function(E,A){if(!this._isValid(E)){return false}var D=this._isSelected(E)!=A;if(D){var B=$e(E.id+"!cm"),C=getZKAttr(E,"zcls");if(A){if(B){B.checked=true}zk.addClass(E,C+"-seld");zkSel.onoutTo(E);setZKAttr(E,"sel","true")}else{if(B){B.checked=false}zk.rmClass(E,C+"-seld");zkSel.onoutTo(E);setZKAttr(E,"sel","false")}if(B){zkLcfc[this._isMultiple()?"checkAll":"onRadioClick"](this,B)}}return D},_setFocus:function(D,B){if(!this._isValid(D)){return false}var C=this._isFocus(D)!=B;if(C){if(B){var A=$e(D.id+"!cm");if((A&&A.tabIndex!=-1)||(A=$e(this.id,"a"))){zk.asyncFocus(A.id)}zkSel.cmonfocusTo(D);if(!this.paging&&zk.gecko){this._render(5)}this._focusItem=D}else{zkSel.cmonblurTo(D)}}return C},_unsetSelectAllExcept:function(D){var C=false;for(var A=0,E=this.bodyrows.length;A<E;++A){var B=this.bodyrows[A];if(B!=D&&this._changeSelect(B,false)){C=true}}return C},_unsetFocusExcept:function(A){return this._focusItem&&this._focusItem!=A?this._setFocus(this._focusItem,false):this._focusItem=null},_render:function(A){if(!this.paging||getZKAttr(this.element,"hasgroup")){setTimeout("zkSel._renderNow('"+this.id+"')",A)}},_renderNow:function(){var F=this.bodyrows;if(!F||!F.length||getZKAttr(this.element,"model")!="true"){return }var E="";var C=this.body.scrollTop,A=C+this.body.offsetHeight;for(var B=0,H=F.length;B<H;++B){var D=F[B];if($visible(D)){var G=zk.offsetTop(D);if(G+zk.offsetHeight(D)<C){continue}if(G>A){break}if(getZKAttr(D,"loaded")!="true"){E+=","+this.getItemUuid(D)}else{if(getZKAttr(D,"inited")!="true"){zk.initAt(D)}}}}if(E){E=E.substring(1);zkau.send({uuid:this.id,cmd:"onRender",data:[E]},0)}},_calcSize:function(){this._calcHgh();var A=this.element.style.width;if(!A||A=="auto"||A.indexOf("%")>=0){A=zk.revisedSize(this.element,this.element.offsetWidth);if(A<0){A=0}if(A){A+="px"}}if(A){this.body.style.width=A;if(this.head){this.head.style.width=A}if(this.foot){this.foot.style.width=A}}var B=this.body.clientWidth;if(zk.ie){if(this.headtbl&&this.headtbl.offsetWidth!=this.bodytbl.offsetWidth){this.bodytbl.style.width=""}}if(B&&this.body.offsetWidth==this.bodytbl.offsetWidth&&this.body.offsetWidth-B>11){if(--B<0){B=0}this.bodytbl.style.width=B+"px"}if(this.headtbl){if(B){this.head.style.width=B+"px"}if(getZKAttr(this.element,"fixed")!="true"){zul.adjustHeadWidth(this.hdfaker,this.bdfaker,this.ftfaker,this.bodyrows)}}else{if(this.foottbl){if(B){this.foot.style.width=B+"px"}if(this.foottbl.rows.length){zk.cpCellWidth(this.foottbl.rows[0],this.bodyrows,this)}}}},_beforeSize:function(){var A=this.element.style.width;if(!A||A=="auto"||A.indexOf("%")>=0){if(this.body){this.body.style.width=""}if(this.head){this.head.style.width=""}if(this.foot){this.foot.style.width=""}}},_recalcSize:function(){if(zk.isRealVisible(this.element)){this._calcSize();this._render(155);if(zk.ie7){zk.repaint(this.element)}}},_visiRowAt:function(B){if(B>=0){var D=this.bodyrows;for(var A=0,E=D.length;A<E;++A){var C=D[A];if($visible(C)&&--B<0){return C}}}return null},_calcHgh:function(){var O=this.bodyrows;var E=this.element.style.height,D=E&&E!="auto"&&E.indexOf("%")<0;if(D){E=$int(E);if(E){E-=this._headHgh(0);if(E<20){E=20}var L=0;l_out:for(var G,F=0,I=O.length;F<I;++L,++F){var A;for(;;++F){if(F>=I){break l_out}A=O[F];if($visible(A)){break}}G=zk.offsetTop(A)+zk.offsetHeight(A);if(G>=E){if(G>E+2){++L}break}}L=Math.ceil(L&&G?(E*L)/G:E/this._headHgh(20));this.realsize(L);E-=(this.foot?this.foot.offsetHeight:0);this.body.style.height=(E<0?0:E)+"px";if(zk.ie&&this.body.offsetHeight){}return }}var K=0,M=this.size(),B,C,J;for(var F=0,I=O.length;F<I;++F){var A=O[F];if($visible(A)){++K;if(!C){C=A}if(M===K){J=A;break}B=A}}E=0;var N=2;if(!M){if(getZKAttr(this.element,"vflex")=="true"){E=this._vflexSize();if(zk.ie&&$int(getZKAttr(this.element,"hgh"))!=E){E-=1;setZKAttr(this.element,"hgh",E)}if(E<25){E=25}var H=zk.offsetHeight(C);if(!H){H=this._headHgh(20)}M=Math.round((E-N)/H);if(M<3){M=3;E=H*3+N}}this.realsize(M)}if(M){if(!E){if(!K){E=this._headHgh(20)*M}else{if(M<=K){E=zk.offsetTop(J)+zk.offsetHeight(J)}else{E=zk.offsetTop(B)+zk.offsetHeight(B);E=Math.ceil((M*E)/K)}}if(zk.ie){E+=N}}this.body.style.height=E+"px";if(zk.ie&&this.body.offsetHeight){}}else{E=this.element.style.height;if(zk.ie&&(!E||E=="auto")&&this.body.offsetWidth-this.body.clientWidth>11){if(!K){this.body.style.height=""}else{this.body.style.height=(this.body.offsetHeight*2-this.body.clientHeight)+"px"}}else{this.body.style.height=""}}},_headHgh:function(D){var B=this.head?this.head.offsetHeight:0;if(this.paging){var C=$e(this.id+"!pgit"),A=$e(this.id+"!pgib");if(C){B+=C.offsetHeight}if(A){B+=A.offsetHeight}}return B?B:D},_vflexSize:function(){if(zk.ie6Only){var C=this.element.style.height;this.element.style.height="";this.element.style.height=C}var A=0;if(this.paging){var D=$e(this.id+"!pgit"),B=$e(this.id+"!pgib");if(D){A+=D.offsetHeight}if(B){A+=B.offsetHeight}}return this.element.offsetHeight-2-(this.head?this.head.offsetHeight:0)-(this.foot?this.foot.offsetHeight:0)-A},resizeCol:function(D,E,A,B,C){if(this.bodyrows){zulHdr.resizeAll(this,D,E,A,B,C)}},_selectAll:function(B){var C=this.bodyrows;for(var A=0,D=C.length;A<D;++A){if(!getZKAttr(C[A],"disd")){this._changeSelect(C[A],true)}}this._setSelectedId(C.length?C[0].id:null);if(B){this._sendSelect(C[0])}},_sendSelect:function(D){var C="";for(var A=0,E=this.bodyrows.length;A<E;++A){var B=this.bodyrows[A];if(this._isSelected(B)){C+=","+this.getItemUuid(B)}}if(C){C=C.substring(1)}zkau.sendasap({uuid:this.id,cmd:"onSelect",data:[C,D?this.getItemUuid(D):""]})},_getSelectedId:function(){var A=getZKAttr(this.element,"selId");if(!A){zk.error(mesg.INVALID_STRUCTURE+"z.selId not found");return null}return A=="zk_n_a"?null:A},_setSelectedId:function(A){setZKAttr(this.element,"selId",A?A:"zk_n_a")},_fixSelelectedId:function(){var A=null;for(var B=0,D=this.bodyrows.length;B<D;++B){var C=this.bodyrows[B];if(this._isSelected(C)){A=C.id;break}}this._setSelectedId(A)},_isSelected:function(A){return getZKAttr(A,"sel")=="true"},_isFocus:function(A){return this._focusItem==A||$e(A.id+"!cm")},_isMultiple:function(){return getZKAttr(this.element,"multiple")=="true"},_setMultiple:function(A){setZKAttr(this.element,"multiple",A?"true":"false");if(!A){this._fixSelelectedId();var B=$e(this._getSelectedId());this._unsetSelectAllExcept(B)}},_isValid:function(A){return A&&!A.id.endsWith("!child")&&!A.id.endsWith("!ph")&&!A.id.endsWith("!pt")},onsubmit:function(){var A=getZKAttr(this.element,"name");if(!A||!this.form){return }for(var B=0,E=this.form.elements.length;B<E;++B){var C=this.form.elements[B];if(getZKAttr(C,"hiddenBy")==this.id){zk.remove(C);--B}}for(var B=0,F=this.bodyrows.length;B<F;++B){var D=this.bodyrows[B];if(this._isSelected(D)){setZKAttr(zk.newHidden(A,getZKAttr(D,"value"),this.form),"hiddenBy",this.id)}}}};zkSel={getNearestRow:function(C){var C=$parentByTag(C,"TR");while(C){var A=getZKAttr(C,"rid");if(A){var B=zkau.getMeta(A);if(B&&B._isRowType){if(B._isRowType(C)){break}}}C=$parentByTag(C.parentNode,"TR")}return C}};zkSel._init=function(A){var B=zkau.getMeta(A);if(B){B._init()}};zkSel._calcSize=function(A){var B=zkau.getMeta(A);if(B){B._calcSize()}};zkSel._renderNow=function(A){var B=zkau.getMeta(A);if(B){B._renderNow()}};zkSel._shallIgnoreEvent=function(B){var A=$tag(B);return !B||!zkau.canFocus(B)||((A=="INPUT"&&!B.id.endsWith("!cm"))||A=="TEXTAREA"||(A=="BUTTON"&&getZKAttr(B,"keyevt")!="true")||A=="SELECT"||A=="OPTION"||$type($outer(B))=="Button")};zkSel.onover=function(A){if(!zk.dragging){if(!A){A=window.event}var B=zkSel.getNearestRow(Event.element(A));if(B){Selectable_effect(B)}}};zkSel.onout=function(A){if(!zk.dragging){if(!A){A=window.event}zkSel.onoutTo(zkSel.getNearestRow(Event.element(A)))}};zkSel.onoutTo=function(A){if(A){Selectable_effect(A,true)}};zkSel.ondragover=function(B){var D=Event.element(B);var A=$tag(D);if(A!="INPUT"&&A!="TEXTAREA"){var C=$parentByType(D,"Lic");if(C){C.firstChild.style.MozUserSelect="none"}}};zkSel.ondragout=function(A){var C=Event.element(A);var B=$parentByType(C,"Lic");if(B){B.firstChild.style.MozUserSelect=""}};zkSel.cmonfocus=function(A){if(zkau.onfocus0(A)){if(!A){A=window.event}zkSel.cmonfocusTo($parentByTag(Event.element(A),"TR"))}};zkSel.cmonblur=function(A){if(!A){A=window.event}zkSel.cmonblurTo($parentByTag(Event.element(A),"TR"))};zkSel.cmonfocusTo=function(A){if(A){zk.addClass(zkSel.getVisibleFirstChildIfAny(A),getZKAttr(A,"zcls")+"-focus")}};zkSel.cmonblurTo=function(C){if(C){var B=getZKAttr(C,"zcls");zk.rmClass(C,B+"-focus");for(var A=C.cells.length;--A>=0;){zk.rmClass(C.cells[A],B+"-focus")}}};zkSel.getVisibleFirstChildIfAny=function(C){for(var B=0,A=C.cells.length;B<A;B++){if(zk.isVisible(C.cells[B])){return C.cells[B]}}return C};zkLibox={};zkLibox.bodyonkeydown=function(A){if(!A){A=window.event}var C=Event.element(A);var B=zkau.getMetaByType(C,"Libox");return !B||B.dobodykeydown(A,C)};zkLibox.onkeydown=function(A){if(!A){A=window.event}var C=Event.element(A);zk.disableSelection($parentByType(C,"Libox"));var B=zkau.getMetaByType(C,"Libox");return !B||B.dokeydown(A,C)};zkLibox.onkeyup=function(A){if(!A){A=window.event}var B=Event.element(A);zk.enableSelection($parentByType(B,"Libox"))};zkLibox.onclick=function(A){if(!A){A=window.event}var C=Event.element(A);var B=zkau.getMetaByType(C,"Libox");if(B){B.doclick(A,C)}};zkLibox.focus=function(A){var B=zkau.getMeta(A);if(B){B._refocus()}return true};zkLibox.setAttr=function(B,A,D){var C=zkau.getMeta(B);return C&&C.setAttr(A,D)};zkLibox.init=function(A){var B=zkau.getMeta(A);if(B){B.init()}else{B=new zk.Selectable(A);if(B.body){zk.listen(B.body,"keydown",zkLibox.bodyonkeydown)}}};zkLibox.childchg=zkLibox.onVisi=zkLibox.onSize=function(A){var B=zkau.getMeta(A);if(B){B._recalcSize()}if(zk.opera&&B.body&&B._scrollTop){B.body.scrollTop=B._scrollTop}};zkLibox.beforeSize=function(A){var B=zkau.getMeta(A);if(B){B._beforeSize()}};zkLit={};zkLit.init=function(A){setZKAttr(A,"inited","true");if(!getZKAttr(A,"disd")){zk.listen(A,"click",zkLibox.onclick);zk.listen(A,"mouseover",zkSel.onover);zk.listen(A,"mouseout",zkSel.onout)}zk.listen(A,"keydown",zkLibox.onkeydown);zk.listen(A,"keyup",zkLibox.onkeyup);zkLit.stripe(A)};zkLit.setAttr=function(B,A,D){if(A=="visibility"){var C=zkau.getMeta(getZKAttr(B,"rid"));if(C){if(!C.fixedStripe){C.fixedStripe=function(){C.stripe()}}setTimeout(C.fixedStripe,0)}}return false};zkLit.initdrag=function(A){if(zk.gecko){zk.listen(A,"mouseover",zkSel.ondragover);zk.listen(A,"mouseout",zkSel.ondragout)}};zkLit.cleandrag=function(A){if(zk.gecko){zk.unlisten(A,"mouseover",zkSel.ondragover);zk.unlisten(A,"mouseout",zkSel.ondragout)}};zkLit.cleanup=function(A){zkLit.stripe(A,true)};zkLit.stripe=function(B,A){var C=zkau.getMeta(getZKAttr(B,"rid"));if(C){if(!C.fixedStripe){C.fixedStripe=function(){C.stripe()}}if(A){zk.addCleanupLater(C.fixedStripe,false,C.id+"Lit")}else{zk.addInitLater(C.fixedStripe,false,C.id+"Lit")}}};zkLic={};zkLic.initdrag=zkLit.initdrag;zkLic.cleandrag=zkLit.cleandrag;zkLic.setAttr=function(D,B,E){if("style"==B){var A=D.firstChild;var C=zk.getTextStyle(E);if(C){zkau.setAttr(A,B,C)}zkau.setAttr(D,B,E);return true}return false};zkLit.onrtclk=function(A){var B=zkau.getMeta(getZKAttr(A,"rid"));if(B&&!B._isSelected(A)){B.doclick(null,A)}};zkLcfc={};zkLcfc.init=function(A){zk.listen(A,"focus",zkSel.cmonfocus);zk.listen(A,"blur",zkSel.cmonblur);zk.listen(A,"click",A.type=="checkbox"?zkLcfc.onclick:zkLcfc.onRadioClick)};zkLcfc.onRadioClick=function(A,C){var E=C||zkau.evtel(A);for(var B=document.getElementsByName(E.name),D=B.length;--D>=0;){B[D].defaultChecked=false}E.defaultChecked=E.checked};zkLcfc.onclick=function(A){var B=zkau.evtel(A);zkLcfc.checkAll(zkau.getMeta(getZKAttr($parentByTag(B,"TR"),"rid")),B)};zkLcfc.checkAll=function(E,A){if(!E||!E._headerCkitem){return }if(A&&!A.checked){E._headerCkitem.checked=false;return }var C;for(var D=E.bodyrows,B=D.length;--B>=0;){if(!getZKAttr(D[B],"disd")){if(!(C=($e(D[B].id+"!cm")||{}).checked)){break}}}if(C){E._headerCkitem.checked=true}};zkLhfc={};zkLhfc.init=function(A){zk.listen(A,"click",zkLhfc.onclick);zk.addInit(function(){var B=zkau.getMeta(getZKAttr($parentByTag(A.parentNode,"TR"),"rid"));if(B){B._headerCkitem=A;zkLcfc.checkAll(B)}})};zkLhfc.cleanup=function(A){var B=zkau.getMeta(getZKAttr($parentByTag(A.parentNode,"TR"),"rid"));if(B){B._headerCkitem=null}};zkLhfc.onclick=function(A){var B=zkau.evtel(A);var C=zkau.getMeta(getZKAttr($parentByTag(B.parentNode,"TR"),"rid"));if(C){B.checked?C._selectAll(true):C.select("")}};zk.addBeforeInit(function(){zkLhr={};Object.extend(zkLhr,zulHdr);zkLhr.resize=function(F,D,A,C){var B=getZKAttr(F.parentNode,"rid");if(B){var E=zkau.getMeta(B);if(E){E.resizeCol($parentByType(F,"Lhrs"),D,F,A,C)}}};zkLhrs=zulHdrs});zkLisel={};zkLisel.init=function(A){zk.listen(A,"change",zkLisel.onchange);if(zk.gecko||zk.safari){zk.listen(A,"keyup",zkLisel.onkeyup)}zk.listen(A,"focus",zkau.onfocus);zk.listen(A,"blur",zkau.onblur);A._lastSelIndex=A.selectedIndex};zkLisel.onkeyup=function(A){var B=zkau.evtel(A);if(B.multiple||B._lastSelIndex===B.selectedIndex){return }zkLisel.onchange(A)};zkLisel.setAttr=function(B,A,C){if(A=="selectedIndex"){B._lastSelIndex=$int(C)}return false};zkLisel.onchange=function(I){var H=zkau.evtel(I);var F,D;if(H.multiple){F="";var B=H.options;for(var E=0,G=B.length;E<G;++E){var C=B[E];if(C.selected){F+=","+C.id;if(!D){D=C.id}}}if(F){F=F.substring(1)}}else{var C=H.options[H.selectedIndex];F=C.id;D=C.id;H._lastSelIndex=H.selectedIndex}var A=$uuid(H);zkau.sendasap({uuid:A,cmd:"onSelect",data:[F,D]});if(zkau.lateReq){zkau.send(zkau.lateReq,25);delete zkau.lateReq}};zkLitgp={init:function(E){setZKAttr(E,"inited","true");if(!getZKAttr(E,"disd")){zk.listen(E,"click",zkLibox.onclick);zk.listen(E,"mouseover",zkSel.onover);zk.listen(E,"mouseout",zkSel.onout)}zk.listen(E,"keydown",zkLibox.onkeydown);E._img=zk.firstChild(E,"IMG",true);if(E._img){zk.listen(E._img,"click",zkLitgp.ontoggle)}var D=E.parentNode.parentNode;if(D.tBodies.length>1){var C=0;for(var F=D.rows[0],B=F.cells.length;--B>=0;){if(zk.isVisible(F.cells[B])){C++}}for(var A=E.cells,B=A.length;--B>=0;){C-=A[B].colSpan}if(C>0&&E.cells.length){E.cells[E.cells.length-1].colSpan+=C}}},ontoggle:function(A){if(!A){A=window.event}var D=Event.element(A);var E=zk.parentNode(D,"TR");if(!E){return }var C=zkau.getMeta(getZKAttr(E,"rid"));if(C){C._syncFocus(E)}var B=!zkLitgp.isOpen(E);zkLitgp._openItem(E,B);if(B&&C||getZKAttr(C.element,"model")=="true"){if(B){C.stripe()}if(!C.paging){C._recalcSize()}}Event.stop(A)},isOpen:function(A){return getZKAttr(A,"open")=="true"},_openItem:function(C,B,A){setZKAttr(C,"open",B?"true":"false");if(C._img){if(B){zk.rmClass(C._img,getZKAttr(C,"zcls")+"-img-close");zk.addClass(C._img,getZKAttr(C,"zcls")+"-img-open")}else{zk.rmClass(C._img,getZKAttr(C,"zcls")+"-img-open");zk.addClass(C._img,getZKAttr(C,"zcls")+"-img-close")}}zkLitgp._openItemNow(C,B);if(!A){zkau.send({uuid:C.id,cmd:"onOpen",data:[B]},B&&getZKAttr(C,"lod")?38:zkau.asapTimeout(C,"onOpen"))}},_openItemNow:function(E,A){for(var D=E.parentNode.parentNode,C=E.rowIndex+1,B=D.rows.length;C<B;C++){if($type(D.rows[C])=="Litgp"||$type(D.rows[C])=="Litgpft"){break}if(getZKAttr(D.rows[C],"visible")=="true"){D.rows[C].style.display=A?"":"none"}}},cleanup:function(D){D._img=null;var C,B=D.parentNode.parentNode;for(var A=D.rowIndex-1;--A>=0;){if($type(B.rows[A])=="Litgp"){C=B.rows[A];break}}if(C){zk.addCleanupLater(function(){C=$e(C.id);if(C){zkLitgp._openItem(C,zkLitgp.isOpen(C),true)}},false,D.id)}else{zkLitgp._openItemNow(D,true)}},setAttr:function(B,A,D){if(A=="z.open"){zkLitgp._openItem(B,"true"==D,true);if("true"==D){var C=zkau.getMeta(getZKAttr(row,"rid"));if(C){C.stripe()}}return true}return false},initdrag:zkLit.initdrag,cleandrag:zkLit.cleandrag,onrtclk:zkLit.onrtclk};zkLitgp.onVisi=zkLitgp.onSize=function(A){zkLitgp._openItem(A,zkLitgp.isOpen(A),true);zkLit.stripe(A)};zkLitgpft={init:function(A){setZKAttr(A,"inited","true");if(!getZKAttr(A,"disd")){zk.listen(A,"click",zkLibox.onclick);zk.listen(A,"mouseover",zkSel.onover);zk.listen(A,"mouseout",zkSel.onout)}zk.listen(A,"keydown",zkLibox.onkeydown);zk.listen(A,"keyup",zkLibox.onkeyup)},cleanup:zkLit.cleanup,initdrag:zkLit.initdrag,cleandrag:zkLit.cleandrag,onrtclk:zkLit.onrtclk};