zk.load("zul.zul");zkWnd2={ztype:"Wnd2",_szs:{},_clean2:{},_modal2:{},onCloseMouseover:function(A){if(!A){A=window.event}var B=Event.element(A),C=$parentByType(B,"Wnd2");zk.addClass(B,getZKAttr(C,"zcls")+"-close-over")},onCloseMouseout:function(A){if(!A){A=window.event}var B=Event.element(A),C=$parentByType(B,"Wnd2");zk.rmClass(B,getZKAttr(C,"zcls")+"-close-over")},onCloseClick:function(A){if(!A){A=window.event}zkau.sendOnClose($parentByType(Event.element(A),"Wnd2"),true);Event.stop(A)},onMinimizeMouseover:function(A){if(!A){A=window.event}var B=Event.element(A),C=$parentByType(B,"Wnd2");zk.addClass(B,getZKAttr(C,"zcls")+"-minimize-over")},onMinimizeMouseout:function(A){if(!A){A=window.event}var B=Event.element(A),C=$parentByType(B,"Wnd2");zk.rmClass(B,getZKAttr(C,"zcls")+"-minimize-over")},onMaximizeMouseover:function(B){if(!B){B=window.event}var C=Event.element(B),D=$parentByType(C,"Wnd2"),A=getZKAttr(D,"zcls");if(getZKAttr(D,"maximized")=="true"){zk.addClass(C,A+"-maximized-over")}zk.addClass(C,A+"-maximize-over")},onMaximizeMouseout:function(B){if(!B){B=window.event}var C=Event.element(B),D=$parentByType(C,"Wnd2"),A=getZKAttr(D,"zcls");if(getZKAttr(D,"maximized")=="true"){zk.rmClass(C,A+"-maximized-over")}zk.rmClass(C,A+"-maximize-over")}};zkWnd2.init=function(A){zkWnd2._initBtn(A);zk.listen(A,"mousemove",function(B){if(window.zkWnd2){zkWnd2.onmouseover(B,A)}});zkWnd2.setSizable(A,zkWnd2.sizable(A));zkWnd2._initMode(A);if(getZKAttr(A,"maximizable")=="true"&&getZKAttr(A,"maximized")=="true"){zk.addInitLater(function(){zkWnd2.maximize(A,true,true)})}};zkWnd2._initBtn=function(C){if(getZKAttr(C,"closable")=="true"){var D=$e(C,"close");if(D){zk.listen(D,"click",this.onCloseClick);zk.listen(D,"mouseover",this.onCloseMouseover);zk.listen(D,"mouseout",this.onCloseMouseout);if(!D.style.cursor){D.style.cursor="default"}}}if(getZKAttr(C,"maximizable")=="true"){var A=$e(C,"maximize");if(A){zk.listen(A,"click",zkWnd2.onMaximize);zk.listen(A,"mouseover",this.onMaximizeMouseover);zk.listen(A,"mouseout",this.onMaximizeMouseout);if(!A.style.cursor){A.style.cursor="default"}}}if(getZKAttr(C,"minimizable")=="true"){var B=$e(C,"minimize");if(B){zk.listen(B,"click",zkWnd2.onMinimize);zk.listen(B,"mouseover",this.onMinimizeMouseover);zk.listen(B,"mouseout",this.onMinimizeMouseout);if(!B.style.cursor){B.style.cursor="default"}}}};zkWnd2.onMaximize=function(A){if(!A){A=window.event}var B=$parentByType(Event.element(A),"Wnd2");if(B){if(getZKAttr(B,"maximizable")!="true"){return }zkWnd2.maximize(B,getZKAttr(B,"maximized")!="true",false,true)}};zkWnd2.maximize=function(K,C,H){var K=$e(K);if(K){var I=zk.isRealVisible(K);if(!I&&C){return }var B,O,M,E,P=K.style,N=getZKAttr(K,"zcls");if(C){zk.addClass($e(K,"maximize"),N+"-maximized");zkWnd2.hideShadow(K);var A=!zkWnd2._embedded(K),G=A?zPos.offsetParent(K):K.parentNode;B=P.left;O=P.top;M=P.width;E=P.height;P.top="-10000px";P.left="-10000px";var L=zk.ie6Only&&G.clientWidth==0?(G.offsetWidth-zk.sumStyles(G,"rl",zk.borders)):G.clientWidth;var D=zk.ie6Only&&G.clientHeight==0?(G.offsetHeight-zk.sumStyles(G,"tb",zk.borders)):G.clientHeight;if(!A){L-=zk.sumStyles(G,"rl",zk.paddings);L=zk.revisedSize(K,L);D-=zk.sumStyles(G,"tb",zk.paddings);D=zk.revisedSize(K,D,true)}if(L<0){L=0}if(D<0){D=0}P.width=L+"px";P.height=D+"px";K._lastSize={l:B,t:O,w:M,h:E};P.top="0px";P.left="0px"}else{var J=$e(K,"maximize");zk.rmClass(J,N+"-maximized");zk.rmClass(J,N+"-maximized-over");if(K._lastSize){P.left=K._lastSize.l;P.top=K._lastSize.t;P.width=K._lastSize.w;P.height=K._lastSize.h;K._lastSize=null}B=P.left;O=P.top;M=P.width;E=P.height;var F=$e(K,"cave");if(F){F.style.width=F.style.height=""}}setZKAttr(K,"maximized",C?"true":"false");if(!H){zkau.sendasap({uuid:K.id,cmd:"onMaximize",data:[B,O,M,E,C]})}if(I){K._maximized=true;zk.beforeSizeAt(K);zk.onSizeAt(K)}}};zkWnd2.onMinimize=function(A){if(!A){A=window.event}var B=$parentByType(Event.element(A),"Wnd2");if(B){if(getZKAttr(B,"minimizable")!="true"){return }zkWnd2.minimize(B,getZKAttr(B,"minimized")!="true",false,true)}};zkWnd2.minimize=function(H,D,C){var H=$e(H);if(H){var G=H.style,B=G.left,E=G.top,A=G.width,F=G.height;if(D){zkWnd2.hideShadow(H);zk.hide(H)}else{zkWnd2._show(H);zk.onSizeAt(H)}setZKAttr(H,"minimized",D?"true":"false");if(!C){zkau.sendasap({uuid:H.id,cmd:"onMinimize",data:[B,E,A,F,D]})}}};zkWnd2.cleanup=function(A){if(A._lastSize){A._lastSize=null}zkWnd2.setSizable(A,false);zkWnd2._cleanMode(A);zkWnd2.cleanupShadow(A)};zkWnd2.onVisi=zkWnd2.onSize=function(A){zkWnd2.hideShadow(A);if(getZKAttr(A,"maximized")=="true"){if(!A._maximized){zkWnd2.syncMaximized(A)}A._maximized=false}zkWnd2._fixWdh(A);zkWnd2._fixHgh(A);zkWnd2.syncShadow(A)};zkWnd2.syncMaximized=function(D){if(!D._lastSize){return }var E=!zkWnd2._embedded(D),F=E?zPos.offsetParent(D):D.parentNode,C=D.style;var A=zk.ie6Only&&F.clientWidth==0?(F.offsetWidth-zk.sumStyles(F,"rl",zk.borders)):F.clientWidth;var B=zk.ie6Only&&F.clientHeight==0?(F.offsetHeight-zk.sumStyles(F,"tb",zk.borders)):F.clientHeight;if(!E){A-=zk.sumStyles(F,"rl",zk.paddings);A=zk.revisedSize(D,A);B-=zk.sumStyles(F,"tb",zk.paddings);B=zk.revisedSize(D,B,true)}if(A<0){A=0}if(B<0){B=0}C.width=A+"px";C.height=B+"px"};zkWnd2._fixWdh=zk.ie7?function(D){if(zkWnd2._embedded(D)||zkWnd2._popup(D)||!zk.isRealVisible(D)){return }var A=D.style.width;var C=zk.firstChild(D,"DIV"),B=zk.lastChild(zk.lastChild(D,"DIV"),"DIV"),F=$e(D.id+"!cave").parentNode;if(!A||A=="auto"){var E=zk.getFrameWidth(F.parentNode)+zk.getFrameWidth(F.parentNode.parentNode);if(C){C.firstChild.firstChild.style.width=F.offsetWidth-(zk.getFrameWidth(C)+zk.getFrameWidth(C.firstChild)-E)+"px"}if(B){B.firstChild.firstChild.style.width=F.offsetWidth-(zk.getFrameWidth(B)+zk.getFrameWidth(B.firstChild)-E)+"px"}}else{if(C){C.firstChild.firstChild.style.width=""}if(B){B.firstChild.firstChild.style.width=""}}}:zk.voidf;zkWnd2._fixHgh=function(B){if(!zk.isRealVisible(B)){return }var A=B.style.height;var C=$e(B.id+"!cave");if(zk.ie6Only&&((A&&A!="auto")||C.style.height)){C.style.height="0px"}if(A&&A!="auto"){zk.setOffsetHeight(C,B.offsetHeight-zkWnd2.getFrameHeight(B)-1)}};zkWnd2.getFrameHeight=function(B){var A=zk.getFrameHeight(B);A+=zkWnd2.getTitleHeight(B);if(!zkWnd2._embedded(B)&&!zkWnd2._popup(B)){var E=$e(B.id+"!cave"),D=zk.lastChild($e(B.id+"!bwrap"),"DIV"),C=$e(B.id+"!caption");A+=D.offsetHeight;if(E){A+=zk.getFrameHeight(E.parentNode)}if(C){A+=zk.getFrameHeight(C.parentNode)}}return A};zkWnd2.getTitleHeight=function(A){var C=$e(A.id+"!caption"),B=0;if(!zkWnd2._embedded(A)&&!zkWnd2._popup(A)&&!C){B=zk.firstChild(A,"DIV").firstChild.firstChild.offsetHeight}return C?C.offsetHeight:B};zkWnd2.getShadow=function(A){return A._shadow};zkWnd2.initShadow=function(A){A._shadow=new zk.Shadow(A)};zkWnd2.cleanupShadow=function(A){if(A._shadow){A._shadow.cleanup();A._shadow=null}};zkWnd2.syncShadow=function(B){if(zkWnd2._embedded(B)){return }if(getZKAttr(B,"maximized")=="true"||getZKAttr(B,"minimized")=="true"){zkWnd2.hideShadow(B);return }var A=zkWnd2.getShadow(B);if(A){A.sync()}};zkWnd2.hideShadow=function(A){if(zkWnd2.getShadow(A)){zkWnd2.getShadow(A).hide()}};zkWnd2._embedded=function(B){var A=getZKAttr(B,"mode");return !A||A=="embedded"};zkWnd2._popup=function(B){var A=getZKAttr(B,"mode");return !A||A=="popup"};zkWnd2.onHide=zkWnd2.hideShadow;zkWnd2.setAttr=function(L,P,D){switch(P){case"visibility":var F=D=="true",I=zkWnd2._embedded(L),G=I?0:1;if(getZKAttr(L,"maximized")=="true"){zkWnd2.maximize(L,false)}else{if(getZKAttr(L,"minimized")=="true"){zkWnd2.minimize(L,false)}}zkWnd2.hideShadow(L);for(var C=L;C=$parent(C);){if($type(C)==zkWnd2.ztype&&!zkWnd2._embedded(C)){G=2;break}}if(G==1){setZKAttr(L,"vvisi",F?"t":"f");F=F&&zk.isRealVisible($parent($childExterior(L)));zk.setVisible(L,F,{anima:true});if(F){zk.setVParent(L)}}else{if(G==0&&(F!=zk.isRealVisible(L))){for(var A in zk._vpts){if(zk.isAncestor(L,A)){var C=$e(A);if(C){var B=getZKAttr(C,"vvisi");if(B!="f"){var N=$visible(C);if(N!=F){if(!B){setZKAttr(C,"vvisi",N?"t":"f")}zk.setVisible(C,F,{anima:true})}}}}}}rmZKAttr(L,"vvisi");zk.setVisible(L,F,{anima:true})}if(!I){zkau.hideCovered()}if(F){zkWnd2.syncShadow(L)}else{zkWnd2.hideShadow(L)}return true;case"z.sizable":zkau.setAttr(L,P,D);zkWnd2.setSizable(L,D=="true");return true;case"z.cntStyle":var C=$e(L.id+"!cave");if(C){zk.setStyle(C,D!=null?D:"");zkWnd2.onSize(L)}return true;case"z.pos":var K=getZKAttr(L,"pos");zkau.setAttr(L,P,D);if(D&&!zkWnd2._embedded(L)){zkWnd2.hideShadow(L);if(K=="parent"&&D!=K){var E=L.style.left,J=L.style.top;var O=getZKAttr(L,"offset").split(",");E=$int(E)-$int(O[0])+"px";J=$int(J)-$int(O[1])+"px";L.style.left=E;L.style.top=J;rmZKAttr(L,"offset")}else{if(D=="parent"){var M=zk.isVParent(L);if(M){var O=zk.revisedOffset(M),E=$int(L.style.left),J=$int(L.style.top);setZKAttr(L,"offset",O[0]+","+O[1]);L.style.left=O[0]+$int(L.style.left)+"px";L.style.top=O[1]+$int(L.style.top)+"px"}}}zkWnd2._center(L,null,D);zkau.hideCovered();zkWnd2.syncShadow(L)}return true;case"style":case"style.height":zkWnd2.hideShadow(L);zkau.setAttr(L,P,D);if(P=="style.height"){zk.beforeSizeAt(L);zk.onSizeAt(L)}else{zkWnd2._fixHgh(L);zkWnd2.syncShadow(L)}return true;case"style.width":zkau.setAttr(L,P,D);zk.beforeSizeAt(L);zk.onSizeAt(L);return true;case"style.top":case"style.left":if(!zkWnd2._embedded(L)&&getZKAttr(L,"pos")=="parent"){var H=getZKAttr(L,"offset");if(H){zkWnd2.hideShadow(L);var O=H.split(",");if(P=="style.top"){L.style.top=$int(O[1])+$int(D)+"px"}else{L.style.left=$int(O[0])+$int(D)+"px"}zkWnd2.syncShadow(L);return true}}zkau.setAttr(L,P,D);if(!zkWnd2._embedded(L)){zkWnd2.syncShadow(L)}return true;case"z.maximized":zkau.setAttr(L,P,D);if(getZKAttr(L,"minimized")=="true"){zkWnd2.minimize(L,false)}zkWnd2.maximize(L,D=="true",true);return true;case"z.minimized":zkau.setAttr(L,P,D);if(getZKAttr(L,"maximized")=="true"){zkWnd2.maximize(L,false)}zkWnd2.minimize(L,D=="true",true);return true}return false};zkWnd2.sizable=function(A){return getZKAttr(A,"sizable")=="true"};zkWnd2.setSizable=function(B,D){var C=B.id;if(D){if(!zkWnd2._szs[C]){var A=B.style.position;zkWnd2._szs[C]=new zDraggable(B,{starteffect:zkau.closeFloats,overlay:true,endeffect:zkWnd2._endsizing,ghosting:zkWnd2._ghostsizing,revert:true,reverteffect:zk.voidf,ignoredrag:zkWnd2._ignoresizing,draw:zkWnd2._draw});B.style.position=A}}else{if(zkWnd2._szs[C]){zkWnd2._szs[C].destroy();delete zkWnd2._szs[C]}}};zkWnd2._insizer=function(D,B,F){var E=zk.revisedOffset(D);var C=E[0]+D.offsetWidth,A=E[1]+D.offsetHeight;if(B-E[0]<=5){if(F-E[1]<=5){return 8}else{if(A-F<=5){return 6}else{return 7}}}else{if(C-B<=5){if(F-E[1]<=5){return 2}else{if(A-F<=5){return 4}else{return 3}}}else{if(F-E[1]<=5){return 1}else{if(A-F<=5){return 5}}}}};zkWnd2.onmouseover=function(A,B){var D=Event.element(A);if(zkWnd2.sizable(B)){var E=zkWnd2._insizer(B,Event.pointerX(A),Event.pointerY(A));var C=zkWnd2._embedded(B)?false:$e(B.id+"!caption");if(E){if(getZKAttr(B,"maximized")=="true"){return }zk.backupStyle(B,"cursor");B.style.cursor=E==1?"n-resize":E==2?"ne-resize":E==3?"e-resize":E==4?"se-resize":E==5?"s-resize":E==6?"sw-resize":E==7?"w-resize":"nw-resize";if(C){C.style.cursor=""}}else{zk.restoreStyle(B,"cursor");if(C){C.style.cursor="move"}}}};zkWnd2._ignoresizing=function(B,E){if(getZKAttr(B,"maximized")=="true"){return true}var D=zkWnd2._szs[B.id];if(D){var A=zkWnd2._insizer(B,E[0],E[1]);if(A){zkWnd2.hideShadow(B);D.z_dir=A;var C=zk.revisedOffset(B);D.z_box={top:C[1],left:C[0],height:B.offsetHeight,width:B.offsetWidth,minHeight:$int(getZKAttr(B,"minheight")),minWidth:$int(getZKAttr(B,"minwidth"))};D.z_orgzi=B.style.zIndex;return false}}return true};zkWnd2._endsizing=function(C,A){var D=zkWnd2._szs[C.id];if(!D){return }if(D.z_orgzi!=null){C.style.zIndex=D.z_orgzi;D.z_orgzi=null}if(D.z_szofs){var B="";if(A){if(A.altKey){B+="a"}if(A.ctrlKey){B+="c"}if(A.shiftKey){B+="s"}}setTimeout("zkWnd2._resize($e('"+C.id+"'),"+D.z_szofs.top+","+D.z_szofs.left+","+D.z_szofs.height+","+D.z_szofs.width+",'"+B+"')",50);D.z_box=D.z_dir=D.z_szofs=null}};zkWnd2._resize=function(F,C,B,D,A,E){F.style.visibility="hidden";if(A!=F.offsetWidth||D!=F.offsetHeight){if(A!=F.offsetWidth){F.style.width=A+"px";zkWnd2._fixWdh(F)}if(D!=F.offsetHeight){F.style.height=D+"px";zkWnd2._fixHgh(F)}zkau.sendOnSize(F,E)}if(B!=F.offsetLeft||C!=F.offsetTop){if(B!=null){F.style.left=B+"px"}if(C!=null){F.style.top=C+"px"}zkau.sendOnMove(F,E)}zkWnd2.syncShadow(F);F.style.visibility="";if(!zkWnd2._embedded(F)){zkau.hideCovered()}};zkWnd2._ghostsizing=function(C,E,D){if(E){zkWnd2.hideShadow(C.element);var B=zkau.beginGhostToDIV(C);var A='<div id="zk_ddghost" class="z-window-resize-proxy" style="position:absolute;top:'+B[1]+"px;left:"+B[0]+"px;width:"+zk.offsetWidth(C.element)+"px;height:"+zk.offsetHeight(C.element)+'px;"></div>';document.body.insertAdjacentHTML("afterbegin",A);C.element=$e("zk_ddghost")}else{var F=zkau.getGhostOrgin(C);if(F){C.z_szofs={top:C.element.offsetTop,left:C.element.offsetLeft,height:zk.revisedSize(C.element,C.element.offsetHeight,true),width:zk.revisedSize(C.element,C.element.offsetWidth)}}else{C.z_szofs=null}zkau.endGhostToDIV(C)}};zkWnd2._draw=function(C,D){if(C.z_dir==8||C.z_dir<=2){var B=C.z_box.height+C.z_box.top-D[1];if(B<C.z_box.minHeight){D[1]=C.z_box.height+C.z_box.top-C.z_box.minHeight;B=C.z_box.minHeight}C.element.style.height=B+"px";C.element.style.top=D[1]+"px"}if(C.z_dir>=4&&C.z_dir<=6){var B=C.z_box.height+D[1]-C.z_box.top;if(B<C.z_box.minHeight){B=C.z_box.minHeight}C.element.style.height=B+"px"}if(C.z_dir>=6&&C.z_dir<=8){var A=C.z_box.width+C.z_box.left-D[0];if(A<C.z_box.minWidth){D[0]=C.z_box.width+C.z_box.left-C.z_box.minWidth;A=C.z_box.minWidth}C.element.style.width=A+"px";C.element.style.left=D[0]+"px"}if(C.z_dir>=2&&C.z_dir<=4){var A=C.z_box.width+D[0]-C.z_box.left;if(A<C.z_box.minWidth){A=C.z_box.minWidth}C.element.style.width=A+"px"}};zkWnd2._initMode=function(B){var C=getZKAttr(B,"mode");var A=zkWnd2._clean2[B.id]==C;if(A){delete zkWnd2._clean2[B.id];if(getZKAttr(B,"visible")=="true"){zk.cleanVisibility(B)}}else{if(zkWnd2._clean2[B.id]){zkWnd2._cleanMode2(B.id,true)}}if(C&&C!="embedded"&&!zkWnd2.getShadow(B)){zkWnd2.initShadow(B)}switch(C){case"modal":case"highlighted":zkWnd2._doModal(B,A);break;case"overlapped":zkWnd2._doOverlapped(B,A);break;case"popup":zkWnd2._doPopup(B,A)}};zkWnd2._cleanMode=function(A){var B=getZKAttr(A,"mode");if(B){zkWnd2._stick(A);zkWnd2._clean2[A.id]=B;setTimeout("zkWnd2._cleanMode2('"+A.id+"')",5)}};zkWnd2._cleanMode2=function(B,A){var C=zkWnd2._clean2[B];if(C){delete zkWnd2._clean2[B];switch(C){case"modal":case"highlighted":zkWnd2._endModal(B,A);break;case"overlapped":zkWnd2._endOverlapped(B,A);break;case"popup":zkWnd2._endPopup(B,A)}}};zkWnd2._show=function(A){if(getZKAttr(A,"conshow")){A.style.display="none"}if(getZKAttr(A,"visible")=="true"){zk.cleanVisibility(A)}zk.show(A)};zkWnd2._doPopup=function(B,A){zkWnd2._doOverpop(B,zkau._popups,A)};zkWnd2._endPopup=function(B,A){zkWnd2._endOverpop(B,zkau._popups,A)};zkWnd2._doOverlapped=function(B,A){zkWnd2._doOverpop(B,zkau._overlaps,A)};zkWnd2._endOverlapped=function(B,A){zkWnd2._endOverpop(B,zkau._overlaps,A)};zkWnd2._doOverpop=function(B,H,A){var G=getZKAttr(B,"pos");var F=zkWnd2.shallVParent(B);if(!G&&F&&!B.style.top&&!B.style.left){var E=zk.revisedOffset(B);B.style.left=E[0]+"px";B.style.top=E[1]+"px"}else{if(G=="parent"&&F){var E=zk.revisedOffset(B.parentNode),D=$int(B.style.left),C=$int(B.style.top);setZKAttr(B,"offset",E[0]+","+E[1]);B.style.left=E[0]+$int(B.style.left)+"px";B.style.top=E[1]+$int(B.style.top)+"px"}}if(F){zk.setVParent(B)}if(A){zkau.fixZIndex(B);zkWnd2._float(B);return }if(G){zkWnd2._center(B,null,G)}zkau.closeFloats(B);zkau.fixZIndex(B);zkWnd2._float(B);H.push(B.id);zkau.hideCovered();if(zk.isVisible(B)){zkWnd2._show(B)}};zkWnd2._endOverpop=function(B,D,A){D.remove(B);var C=$e(B);if(C){zk.unsetVParent(C);zkau.hideCovered();if(!A){zkWnd2._stick(C)}}};zkWnd2.shallVParent=function(A){while(A=$parent(A)){if($type(A)==zkWnd2.ztype&&!zkWnd2._embedded(A)){return false}}return true};zkWnd2._doModal=function(K,B){if(!getZKAttr(K,"conshow")){var E=getZKAttr(K,"aos")||"appear";if(E!="z_none"){setZKAttr(K,"conshow","anima."+E+"($e('"+K.id+"'));")}}var A=zkau._modals.length;zkau.fixZIndex(K,true);var P=++zkau.topZIndex;var J=getZKAttr(K,"pos");if(zkWnd2.shallVParent(K)){if(J=="parent"){var O=zk.revisedOffset(K.parentNode),D=$int(K.style.left),I=$int(K.style.top);setZKAttr(K,"offset",O[0]+","+O[1]);K.style.left=O[0]+$int(K.style.left)+"px";K.style.top=O[1]+$int(K.style.top)+"px"}zk.setVParent(K)}zkWnd2._center(K,P,J);if(!J){var I=$int(K.style.top),H=zk.innerY();if(H){var L=I-H;if(L>100){K.style.top=I-(L-100)+"px"}}else{if(I>100){K.style.top="100px"}}}if(B){zkWnd2._float(K);return }zkWnd2._show(K);zkau.closeFloats(K);var G=K.id+".mask";var N=$e(G);if(!N){var M=true;for(var F=0;F<A;++F){var C=$e(zkau._modals[F]);if(C&&zk.isAncestor(C,K)){M=false;break}}if(M){K.insertAdjacentHTML("beforebegin",'<div id="'+G+'" class="z-modal-mask"></div>');N=$e(G);zk.listen(N,"mousemove",Event.stop)}}if(N){zkWnd2._posMask(N);N.style.display="block";N.style.zIndex=P-1;if(zkau.currentFocus){N.setAttribute("zk_prevfocus",zkau.currentFocus.id)}}zkau._modals.push(K.id);if(A==0){zk.listen(window,"resize",zkWnd2._onMoveMask);zk.listen(window,"scroll",zkWnd2._onMoveMask)}zkWnd2._float(K);zk.asyncFocusDown(K.id,45);zkWnd2._modal2[K.id]=true;setTimeout("zkWnd2._doModal2('"+K.id+"')",5)};zkWnd2._doModal2=function(A){if(zkWnd2._modal2[A]){delete zkWnd2._modal2[A];var B=$e(A);if(B){zk.restoreDisabled(B);zk.disableAll(B)}}};zkWnd2._endModal=function(D,C){var A=D+".mask";var B=$e(A);var H;if(B){H=B.getAttribute("zk_prevfocus");zk.remove(B)}zkau._modals.remove(D);delete zkWnd2._modal2[D];var F=$e(D);if(F){zk.unsetVParent(F)}if(zkau._modals.length==0){zk.unlisten(window,"resize",zkWnd2._onMoveMask);zk.unlisten(window,"scroll",zkWnd2._onMoveMask);window.onscroll=null;zk.restoreDisabled()}else{var G=zkau._modals[zkau._modals.length-1];var E=$e(G);if(E){zk.restoreDisabled(E);if(!H&&!zk.inAsyncFocus){zk.asyncFocusDown(G,20)}}}if(!C&&F){zkWnd2._stick(F)}if(H&&!zk.inAsyncFocus){zk.asyncFocus(H,20)}};zkWnd2._onMoveMask=function(B){for(var C=zkau._modals.length;--C>=0;){var A=$e(zkau._modals[C]+".mask");if(A){zkWnd2._posMask(A);return }}};zkWnd2._posMask=function(A){var B=zk.toStyleOffset(A,zk.innerX(),zk.innerY());A.style.left=B[0]+"px";A.style.top=B[1]+"px";A.style.width=zk.innerWidth()+"px";A.style.height=zk.innerHeight()+"px"};zkWnd2._center=function(E,J,D){if(D=="parent"){return }E.style.position="absolute";zk.center(E,D);var G=zkWnd2.getShadow(E);if(D&&G){var C=G.getDelta(),A=E.offsetLeft,H=E.offsetTop,F=E.offsetWidth,B=E.offsetHeight,I=E.style;if(D.indexOf("left")>=0&&C.l<0){I.left=A-C.l+"px"}else{if(D.indexOf("right")>=0){I.left=A-(zk.ie?Math.round((Math.abs(C.l)+C.w)/2):Math.round((C.l+C.w)/2))-1+"px"}}if(D.indexOf("top")>=0&&C.t<0){I.top=H-C.t+"px"}else{if(D.indexOf("bottom")>=0){I.top=H-(zk.ie?Math.round((Math.abs(C.t)+C.h)/2)+1:Math.round((C.t+C.h)/2))-1+"px"}}}zkau.sendOnMove(E);if(J||J==0){E.style.zIndex=J;zkau.sendOnZIndex(E)}};zkWnd2._float=function(A){if(A){var B=$e(A.id+"!caption");if(B){B.style.cursor="move";A.style.position="absolute";zul.initMovable(A,{handle:B,starteffect:zkWnd2._startMove,overlay:true,change:zkau.hideCovered,ghosting:zkWnd2._ghostmove,ignoredrag:zkWnd2._ignoremove,endeffect:zkWnd2._onWndMove})}}};zkWnd2._ghostmove=function(F,H,A){if(H){zkWnd2.hideShadow(F.element);var E=zkau.beginGhostToDIV(F),G=zk.firstChild(F.element,"DIV"),B=G.cloneNode(true);var D='<div id="zk_ddghost" class="z-window-move-ghost" style="position:absolute;top:'+E[1]+"px;left:"+E[0]+"px;width:"+zk.offsetWidth(F.element)+"px;height:"+zk.offsetHeight(F.element)+"px;z-index:"+F.element.style.zIndex+'"><ul></ul></div></div>';document.body.insertAdjacentHTML("afterbegin",D);F._zoffs=E;F.element.style.visibility="hidden";var C=F.element.offsetHeight-G.offsetHeight;F.element=$e("zk_ddghost");F.element.firstChild.style.height=zk.revisedSize(F.element.firstChild,C,true)+"px";F.element.insertBefore(B,F.element.firstChild)}else{var I=zkau.getGhostOrgin(F);if(I){I.style.top=I.offsetTop+F.element.offsetTop-F._zoffs[1]+"px";I.style.left=I.offsetLeft+F.element.offsetLeft-F._zoffs[0]+"px"}zkau.endGhostToDIV(F);document.body.style.cursor=""}};zkWnd2._ignoremove=function(B,D,A){var C=Event.element(A);if(!C||C.id.indexOf("!close")>-1||C.id.indexOf("!minimize")>-1||C.id.indexOf("!maximize")>-1){return true}if(!zkWnd2.sizable(B)||(B.offsetTop+4<D[1]&&B.offsetLeft+4<D[0]&&B.offsetLeft+B.offsetWidth-4>D[0])){return false}return true};zkWnd2._startMove=function(A,B){if(A.style.top&&A.style.top.indexOf("%")>=0){A.style.top=A.offsetTop+"px"}if(A.style.left&&A.style.left.indexOf("%")>=0){A.style.left=A.offsetLeft+"px"}var C=$real(B);zkau.closeFloats(C,B)};zkWnd2._stick=function(A){if(A){zul.cleanMovable(A.id);A.style.position=""}};zkWnd2._onWndMove=function(C,A){C.style.visibility="";var B="";if(A){if(A.altKey){B+="a"}if(A.ctrlKey){B+="c"}if(A.shiftKey){B+="s"}}zkWnd2.syncShadow(C);zkau.sendOnMove(C,B)};