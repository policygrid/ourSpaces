zk.load("zul.lang.msgzul*");zul={};zul._movs={};zul.fixDropBtn2=function(A){var A=$e(A);if(A){zul._fixdbtn2(A)}};zul._fixdbtn2=function(F){F=$e(F);if(!F){return }var D=$e(F.id+"!btn");if(zk.isRealVisible(D)&&D.style.position!="relative"){var E=$real(F),B=zk.firstChild(D,"IMG");if(!E.offsetHeight||!B.offsetHeight){setTimeout("zul._fixdbtn2($e('"+F.id+"'))",66);return }var A=E.offsetHeight-B.offsetHeight;if(A!==0){var C=$int(Element.getStyle(B,"height"))+A;B.style.height=(C<0?0:C)+"px"}A=E.offsetTop-B.offsetTop;D.style.position="relative";D.style.top=A+"px";if(zk.safari){D.style.left="-2px"}}};zul.ondropbtnover=function(A){if(!A){A=window.event}var B=$parentByTag(Event.element(A),"SPAN"),C=$real(B),D=getZKAttr($outer(B),"zcls");if(C&&!C.disabled&&!zk.dragging){zk.addClass(B,D+"-btn-over")}};zul.ondropbtnout=function(A){if(!A){A=window.event}var B=$parentByTag(Event.element(A),"SPAN"),C=$real(B),D=getZKAttr($outer(B),"zcls");if(C&&!C.disabled&&!zk.dragging){zk.rmClass(B,D+"-btn-over")}};zul.ondropbtndown=function(A){if(!A){A=window.event}var B=$parentByTag(Event.element(A),"SPAN"),C=$real(B),D=getZKAttr($outer(B),"zcls");if(C&&!C.disabled&&!zk.dragging){if(zul._currentbtn){zul.ondropbtnup(A)}zk.addClass(B,D+"-btn-clk");zk.listen(document.body,"mouseup",zul.ondropbtnup);zul._currentbtn=B}};zul.ondropbtnup=function(A){zul._currentbtn=$e(zul._currentbtn);var B=getZKAttr($outer(zul._currentbtn),"zcls");zk.rmClass(zul._currentbtn,B+"-btn-clk");zk.unlisten(document.body,"mouseup",zul.ondropbtnup);zul._currentbtn=null};zul.onFixDropBtn=function(A){zul.fixDropBtn2(A)};zul.initMovable=function(B,A){zul._movs[B.id]=new zDraggable(B,A)};zul.cleanMovable=function(A){if(zul._movs[A]){zul._movs[A].destroy();delete zul._movs[A]}};zul.getMetaByHeader=function(A){return zkau.getMeta(getZKAttr(A.parentNode,"rid"))};zul.adjustHeadWidth=function(N,L,E,K){if(N==null||L==null||!N.cells.length||!L.cells.length||!zk.isRealVisible(N)||!K||!K.length){return }var Q=N.parentNode.parentNode,F=zul.getRealHeader(Q.tBodies[1].rows);if(!F){return }if(zk.opera){if(!Q.style.width){var I=true,A=Q.parentNode.offsetWidth;for(var P=N.cells.length;--P>=0;){if(!N.cells[P].style.width||N.cells[P].style.width.indexOf("%")>=0){I=false;break}A-=$int(N.cells[P].style.width)}if(!I||A>=0){Q.style.tableLayout="auto"}}}var D=zk.revisedSize(F.cells[0],100)!==zk.revisedSize(N.cells[0],100);var O=$parentByTag(L,"TABLE"),R=Math.max(Q.offsetWidth,O.offsetWidth),M=$parentByTag(E,"TABLE"),G=Math.min(O.parentNode.clientWidth,O.offsetWidth);if(R==O.parentNode.offsetWidth&&O.parentNode.offsetWidth>G&&O.parentNode.offsetWidth-G<20){R=G}var H=R;Q.style.width=R+"px";if(O){O.style.width=Q.style.width}if(M){O.style.width=Q.style.width}for(var P=L.cells.length;--P>=0;){if(!zk.isVisible(N.cells[P])){continue}var J=P!=0?L.cells[P].offsetWidth:H;L.cells[P].style.width=zk.revisedSize(L.cells[P],J)+"px";N.cells[P].style.width=L.cells[P].style.width;if(E){E.cells[P].style.width=L.cells[P].style.width}var C=D?zk.revisedSize(F.cells[P],$int(N.cells[P].style.width)):$int(N.cells[P].style.width);F.cells[P].style.width=C+"px";var B=F.cells[P].firstChild;B.style.width=zk.revisedSize(B,C)+"px";H-=J}if(R!=Q.offsetWidth){R=Q.offsetWidth;G=Math.min(O.parentNode.clientWidth,O.offsetWidth);if(R==O.parentNode.offsetWidth&&O.parentNode.offsetWidth>G&&O.parentNode.offsetWidth-G<20){R=G}Q.style.width=R+"px";if(O){O.style.width=Q.style.width}if(M){O.style.width=Q.style.width}}};zul.getRealHeader=function(C){for(var A=0,D=C.length;A<D;A++){var B=$type(C[A]);if(B=="Cols"||B=="Lhrs"||B=="Tcols"){return C[A]}}return null};zulHdrs={};zulHdrs.setAttr=function(D,A,E){zkau.setAttr(D,A,E);if(A=="z.sizable"){var C=D.cells;if(C){var F=E=="true";for(var B=C.length;--B>=0;){zulHdr.setSizable(C[B],F)}}}return true};zulHdrs.ondragover=function(B){var E=Event.element(B);var A=$tag(E);if(A!="INPUT"&&A!="TEXTAREA"){var D=E;for(;D;D=$parent(D)){var C=$type(D);if(C=="Lhr"||C=="Col"||C=="Tcol"||C=="Ftr"){break}}if(D){D.firstChild.style.MozUserSelect="none"}}};zulHdrs.ondragout=function(A){var D=Event.element(A);var C=D;for(;C;C=$parent(C)){var B=$type(C);if(B=="Lhr"||B=="Col"||B=="Tcol"||B=="Ftr"){break}}if(C){C.firstChild.style.MozUserSelect=""}};zulHdrs.initdrag=function(A){if(zk.gecko){zk.listen(A,"mouseover",zulHdrs.ondragover);zk.listen(A,"mouseout",zulHdrs.ondragout)}};zulHdrs.cleandrag=function(A){if(zk.gecko){zk.unlisten(A,"mouseover",zulHdrs.ondragover);zk.unlisten(A,"mouseout",zulHdrs.ondragout)}};zulHdrs.cleanup=function(D){var B=$e(D.id+"!hdfaker"),C=$e(D.id+"!bdfaker"),A=$e(D.id+"!ftfaker");if(B){zk.remove(B)}if(C){zk.remove(C)}if(A){zk.remove(A)}};zulHdr={};zulHdr._szs={};zulHdr.initdrag=zulHdrs.initdrag;zulHdr.cleandrag=zulHdrs.cleandrag;zulHdr.init=function(A){zulHdr._show(A);zk.listen(A,"click",function(B){zulHdr.onclick(B,A)});zk.listen(A,"mousemove",function(B){if(window.zulHdr){zulHdr.onmove(B,A)}});zulHdr.setSizable(A,zulHdr.sizable(A));zulHdr.fixedFake(A)};zulHdr._faker=["hdfaker","bdfaker","ftfaker"];zulHdr.fixedFake=function(C){var D=zul.getMetaByHeader(C);if(!D){return }var A=zk.cellIndex(C);for(var B=zulHdr._faker.length;--B>=0;){if(D[zulHdr._faker[B]]&&!$e(C.id+"!"+zulHdr._faker[B])){D[zulHdr._faker[B]][D[zulHdr._faker[B]].cells.length>A?"insertBefore":"appendChild"](zulHdr.createFake(C,zulHdr._faker[B]),D[zulHdr._faker[B]].cells[A])}}};zulHdr.createFake=function(B,D){var A=document.createElement("TH"),C=document.createElement("DIV");A.id=B.id+"!"+D;A.className=B.className;A.style.cssText=B.style.cssText;C.style.overflow="hidden";A.appendChild(C);return A};zulHdr.sizable=function(A){return A.parentNode&&getZKAttr(A.parentNode,"sizable")=="true"};zulHdr.setSizable=function(B,D){var C=B.id;if(D){if(!zulHdr._szs[C]){var A=function(E,F){return zulHdr._snap(B,E,F)};zulHdr._szs[C]=new zDraggable(B,{starteffect:zk.voidf,endeffect:zulHdr._endsizing,ghosting:zulHdr._ghostsizing,revert:true,ignoredrag:zulHdr._ignoresizing,snap:A,constraint:"horizontal"})}}else{if(zulHdr._szs[C]){zulHdr._szs[C].destroy();delete zulHdr._szs[C]}}};zulHdr.resizeAll=function(F,D,E,A,B,C){if(getZKAttr(F.element,"fixed")!="true"){zul.adjustHeadWidth(F.hdfaker,F.bdfaker,F.ftfaker,F.bodyrows)}zkau.send({uuid:F.id,cmd:"onInnerWidth",data:[F.headtbl.style.width]},-1);zkau.sendasap({uuid:D.id,cmd:"onColSize",data:[E,A.id,(B+"px"),C]});F._render(zk.gecko?200:60)};zulHdr.cleanup=function(D){zulHdr.setSizable(D,false);var B=$e(D.id+"!hdfaker"),C=$e(D.id+"!bdfaker"),A=$e(D.id+"!ftfaker");if(B){zk.remove(B)}if(C){zk.remove(C)}if(A){zk.remove(A)}};zulHdr.setAttr=function(E,J,B){switch(J){case"style.width":case"style.height":case"style":var H=E.firstChild;var G=B,I=zul.getMetaByHeader(E);if(J=="style"){G=zk.getTextStyle(B,true,true)}if(G){if(J=="style.width"){if(G&&G!="auto"&&G.indexOf("%")<0){var C=zk.revisedSize(I.headrows[0].cells[0],100)!==zk.revisedSize(I.hdfaker.cells[0],100);G=(C?zk.revisedSize(E,$int(G)):G);G=zk.revisedSize(H,$int(G))+"px";zkau.setAttr(H,J,G)}else{zkau.setAttr(H,J,"100%")}}else{zkau.setAttr(H,J,G)}}zkau.setAttr(E,J,B);if(J=="style.width"){var A=$e(E.id+"!hdfaker"),D=$e(E.id+"!bdfaker"),F=$e(E.id+"!ftfaker");if(A){A.style.width=B;I.headtbl.style.width=""}if(D){D.style.width=B;I.bodytbl.style.width=""}if(F){F.style.width=B;I.foottbl.style.width=""}if(zk.opera){zk.redraw(I.element)}else{I._recalcSize()}}return true}zkau.setAttr(E,J,B);if(J=="z.sort"){zulHdr._show(E)}return true};zulHdr.onclick=function(A,B){if(!zk.dragging&&$uuid(Event.element(A))==B.id&&zulHdr._sortable(B)&&zkau.insamepos(A)&&$tag(Event.element(A))!="INPUT"){zkau.send({uuid:B.id,cmd:"onSort"},10)}};zulHdr.onmove=function(A,C){if(zk.dragging){return }var D=zk.revisedOffset(C);var B=zulHdr._insizer(C,Event.pointerX(A)-D[0]);if(B){zk.backupStyle(C,"cursor");C.style.cursor=B==1?"e-resize":"w-resize"}else{zk.restoreStyle(C,"cursor")}};zulHdr.ignoredrag=function(A,C){var B=zk.revisedOffset(A);return zulHdr._insizer(A,C[0]-B[0])};zulHdr._insizer=function(B,A){if(zulHdr.sizable(B)){if(A>=B.offsetWidth-10){return 1}}return 0};zulHdr._ignoresizing=function(B,E){var D=zulHdr._szs[B.id];if(D){var C=zk.revisedOffset(B);var A=zulHdr._insizer(B,E[0]-C[0]);if(A){D.z_min=10+zk.getFrameWidth(B);return false}}return true};zulHdr._endsizing=function(H,K){var G=zulHdr._szs[H.id];if(G&&G.z_szofs){var M=zul.getMetaByHeader(H);var N="",B=G.z_szofs,O=$parentByTag(H,"TABLE"),I=O.tBodies[0].rows[0],E=zk.revisedSize(I.cells[0],100)!==zk.revisedSize(O.tBodies[1].rows[0].cells[0],100),A=E?zk.revisedSize(H,B):B,L=I.cells,P=zk.cellIndex(H),F=0;for(var D=L.length;--D>=0;){if(D!==P){F+=L[D].offsetWidth}}if(M.foottbl){M.ftfaker.cells[P].style.width=B+"px"}var C;if(M.bodytbl){if(zk.opera&&!M.bodytbl.style.tableLayout){C="auto";M.bodytbl.style.tableLayout="fixed"}M.bdfaker.cells[P].style.width=B+"px"}I.cells[P].style.width=B+"px";H.style.width=A+"px";var J=H.firstChild;J.style.width=zk.revisedSize(J,A)+"px";O.style.width=F+B+"px";if(M.foottbl){M.foottbl.style.width=O.style.width}if(M.bodytbl){M.bodytbl.style.width=O.style.width}if(K){if(K.altKey){N+="a"}if(K.ctrlKey){N+="c"}if(K.shiftKey){N+="s"}}if(zk.opera&&C){M.bodytbl.style.tableLayout=C}setTimeout("zk.eval($e('"+H.id+"'),'resize',null,"+P+",'"+B+"','"+N+"')",0)}};zulHdr._ghostsizing=function(F,G,B){if(G){var D=F.element.parentNode.parentNode.parentNode;var H=zk.revisedOffset(D);var E=zkau.beginGhostToDIV(F);E[1]=H[1];E[0]+=zk.offsetWidth(F.element);document.body.insertAdjacentHTML("afterbegin",'<div id="zk_ddghost" style="position:absolute;top:'+E[1]+"px;left:"+E[0]+"px;width:3px;height:"+zk.offsetHeight(D.parentNode.parentNode)+'px;background:darkgray"><img src="'+zk.getUpdateURI("/web/img/spacer.gif")+'"/></div>');F.element=$e("zk_ddghost")}else{var I=zkau.getGhostOrgin(F);if(I){var C=zk.revisedOffset(F.element);var A=zk.revisedOffset(I);F.z_szofs=C[0]-A[0]}else{F.z_szofs=0}zkau.endGhostToDIV(F)}};zulHdr._snap=function(B,A,E){var D=zulHdr._szs[B.id];if(D){var C=zk.revisedOffset(B);A+=zk.offsetWidth(B);if(C[0]+D.z_min>=A){A=C[0]+D.z_min}}return[A,E]};zulHdr._sortable=function(A){return getZKAttr(A,"asc")||getZKAttr(A,"dsc")};zulHdr._show=function(B){var A=getZKAttr(B,"zcls");zk.rmClass(B,A+"-sort-dsc");zk.rmClass(B,A+"-sort-asc");switch(getZKAttr(B,"sort")){case"ascending":zk.addClass(B,A+"-sort-asc");break;case"descending":zk.addClass(B,A+"-sort-dsc");break;case"natural":zk.addClass(B,A+"-sort");break}};zkFtr={};zkFtr.initdrag=zulHdrs.initdrag;zkFtr.cleandrag=zulHdrs.cleandrag;zkFtrs={};zkFtrs.initdrag=zulHdrs.initdrag;zkFtrs.cleandrag=zulHdrs.cleandrag;